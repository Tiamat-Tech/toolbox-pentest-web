#!/bin/bash
################################################################
# Script to extract and display the structure of an XML file.
#
# Does not support large files due to "xmlstarlet" limitations.
# Use the script "identify-xml-structure.py" in such case.
#
# Requirement software:
#   apk add xmlstarlet
#################################################################
if [ "$#" -lt 1 ]; then
    script_name=$(basename "$0")
    echo "Usage:"
    echo "   $script_name [XML_FILE]"
    echo ""
    echo "Call example:"
    echo "    $script_name test.xml"	
    exit 1
fi
xml_file=$1
xml sel -T -t -m '//*' -m 'ancestor-or-self::*' -v 'name()' -i 'not(position()=last())' -o . -b -b -n $xml_file
