#!/bin/bash
###########################################################################################################
# Script to extract nodes from an XML file using a XPath expression.
#
# Requirement software:
#   sudo apt install libxml2-utils highlight
###########################################################################################################
if [ "$#" -lt 2 ]; then
    script_name=$(basename "$0")
    echo "Usage:"
    echo "   $script_name [XML_FILE] [XPATH_EXPRESSION]"
    echo ""
    echo "Call example:"
    echo "    $script_name test.xml '/root/elt'"
    echo "    $script_name test.xml '/elt1'"	
    exit 1
fi
xml_file=$1
xpath_expr=$2
xmllint --xpath "$xpath_expr" "$xml_file" > /tmp/node.xml
highlight -O ansi --force /tmp/node.xml
rm /tmp/node.xml