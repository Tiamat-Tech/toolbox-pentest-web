#!/usr/bin/env python
import argparse
import urllib.parse
import json
"""
Script to generate a JSON string from a string containing www form URL encoded data.

Based on the following references: 
    https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST
"""

if __name__ == "__main__":
    default_json_file = "wwwform.json"
    parser = argparse.ArgumentParser(description="Script to generate a JSON string from a string containing www form URL encoded data.")
    required_params = parser.add_argument_group("required named arguments")
    required_params.add_argument("-i", action="store", dest="wwwform", help="String containing www form URL encoded data.", required=True)
    args = parser.parse_args()
    params = urllib.parse.parse_qs(args.wwwform, keep_blank_values=True)
    json_data = {}
    for param_name, param_value in params.items():
        if len(param_value) == 1:
            json_data[param_name] = param_value[0]
        else:
            json_data[param_name] = param_value
    print(json.dumps(json_data, indent=1))
