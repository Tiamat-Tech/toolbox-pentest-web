#!/bin/bash
# Clean package managers cache
source /root/pyenv/bin/activate
go clean -modcache
go clean -cache
cargo cache --autoclean
python -m pip cache purge
# Remove not needed packages
#apk del build-base openssl-dev python3-dev 
apk cache clean
# Remove all .git folders
# Source: https://gist.github.com/facelordgists/80e868ff5e315878ecd6
( find / -type d -name ".git" && find . -name ".gitignore" && find . -name ".gitmodules" ) | xargs rm -rf
# Add the image build date
echo "Image build on '$(date)'." > /root/build-datetime.txt
# Print install python packages
python /tools/scripts/generate-python-installed-packages-list.py
