#!/bin/bash
INDEX_FILE="docs/10-SCRIPTS_INDEX.md"
prefixes=("attack" "identify" "generate")
cd scripts
echo "> **Note**: 🕒 Updated on $(date +'%Y-%m-%d at %T')" > $INDEX_FILE
echo "" >> $INDEX_FILE
for p in ${prefixes[@]};
do
    case $p in
    attack)
        emoji="😈"
        ;;
    generate)
        emoji="🏭"
        ;;
    identify)
        emoji="🔎"
        ;;
    *)
        emoji="❓"
        ;;            
    esac
    captalized="$(tr '[:lower:]' '[:upper:]' <<< ${p:0:1})${p:1}"    
    echo "# $emoji $captalized action type" >> $INDEX_FILE
    echo "" >> $INDEX_FILE
    for s in $(find . -type f -name "$p-*" | sort)
    do
        script_name=$(basename $s)
        echo "* [$script_name](scripts/$s)." >> $INDEX_FILE
    done
    echo "" >> $INDEX_FILE
done
cd ..
